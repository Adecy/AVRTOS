; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = MinimalExample

src_dir = src
include_dir = src

#_____________________________________________________________________________#

# Global configuration for ATmega328p and Arduino Pro

[env]
platform = atmelavr
board = megaatmega2560
; board = megaatmega2560, pro16MHzatmega328

; Build options debug/release
; build_type = debug

build_src_filter =
    +<avrtos/>

build_flags = 
;     -Wl,-T./arch/avr/avrtos-avr5-atmega328p.xn
    -Wl,-T./arch/avr/avrtos-avr6.xn   

; /dev/ttyACM0
upload_port = /dev/ttyACM0

; /dev/ttyACM0
monitor_port = /dev/ttyACM0
monitor_speed = 500000

build_type = debug

[env:DataStructures]
build_src_filter =
    ${env.build_src_filter}
    +<examples/data-structures>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=0
        -DCONFIG_KERNEL_THREAD_IDLE=0


[env:Cpp]
build_src_filter =
    ${env.build_src_filter}
    +<examples/cpp>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_TIME_SLICE_US=50000
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:Atomic]
build_src_filter =
    ${env.build_src_filter}
    +<examples/atomic>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_KERNEL_ATOMIC_API=1


[env:BlinkingLed]
build_src_filter =
    ${env.build_src_filter}
    +<examples/blinking-led>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=0


[env:Canaries]
build_src_filter =
    ${env.build_src_filter}
    +<examples/canaries>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1


[env:CoopMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/coop-multithreading-demo>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=0
        -DCONFIG_THREAD_IDLE_COOPERATIVE=0


[env:DrvApiTimers]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-api-timers>

build_flags =
    ${env.build_flags}
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_DRIVERS_TIMER2_API=1
        -DCONFIG_DRIVERS_TIMER4_API=1
        -DCONFIG_DRIVERS_TIMER5_API=1


[env:DrvTimers]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
        -DCONFIG_KERNEL_THREAD_IDLE=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=0
        -DCONFIG_KERNEL_TIME_SLICE_US=4000
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
        -DCONFIG_KERNEL_DELAY_OBJECT_U32=1
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_TIME=1


[env:DrvUsartAsync]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-usart-async>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=50
        -DCONFIG_DRIVERS_USART1_ASYNC=1
        -DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
        -DCONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=0x200


[env:Events]
build_src_filter =
    ${env.build_src_filter}
    +<examples/events>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_THREAD_IDLE=0
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x80
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_TIMERS=0
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_EVENTS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_THREAD_STACK_SENTINEL=1
        -DCONFIG_KERNEL_API_NOINLINE=1


[env:FifoSlab]
build_src_filter =
    ${env.build_src_filter}
    +<examples/fifo-slab>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_TIME_SLICE_US=4000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_ASSERT=0


[env:Fifo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/fifo>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1


[env:Footprint]
build_src_filter =
    ${env.build_src_filter}
    +<examples/footprint>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_THREAD_IDLE=0
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
        -DCONFIG_STDIO_PRINTF_TO_USART=-1
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
        -DCONFIG_KERNEL_TIME_SLICE_US=1000


[env:Idle]
build_src_filter =
    ${env.build_src_filter}
    +<examples/idle>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_IDLE_COOPERATIVE=0
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=10000
        -DCONFIG_KERNEL_TIME_SLICE_US=10000
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_UPTIME=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_KERNEL_THREAD_IDLE=0


[env:InterruptYield]
build_src_filter =
    ${env.build_src_filter}
    +<examples/interrupt-yield>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=16000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_API_NOINLINE=0


[env:MemSlab]
build_src_filter =
    ${env.build_src_filter}
    +<examples/mem_slab>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x80
        -DCONFIG_THREAD_STACK_SENTINEL=1
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_TIME=1


[env:MinimalExample]
build_src_filter =
    ${env.build_src_filter}
    +<examples/minimal-example>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=-1
        -DCONFIG_THREAD_MAIN_COOPERATIVE=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:Msgq]
build_src_filter =
    ${env.build_src_filter}
    +<examples/msgq>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x64


[env:MultithreadingSwitchingFrequency]
build_src_filter =
    ${env.build_src_filter}
    +<examples/multithreading-switching-frequency>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=0


[env:MutexMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/mutex-multithreading-demo>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_THREAD_MAIN_COOPERATIVE=0
        -DCONFIG_KERNEL_TIME_SLICE_US=16000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_THREAD_IDLE=0
        -DCONFIG_KERNEL_ASSERT=1


[env:MutexMultithreadingTest]
build_src_filter =
    ${env.build_src_filter}
    +<examples/mutex-multithreading-test>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=16000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:ObjectReservation]
build_src_filter =
    ${env.build_src_filter}
    +<examples/object-reservation>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000000
        -DCONFIG_KERNEL_TIME_SLICE_US=1000000
        -DCONFIG_KERNEL_UPTIME=0
        -DCONFIG_KERNEL_DEBUG=1
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=1
        -DCONFIG_KERNEL_ASSERT=1


[env:PremptMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/prempt-multithreading-demo>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=250000
        -DCONFIG_KERNEL_DEBUG=1
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_DEBUG_PREEMPT_UART=1


[env:Prng]
build_src_filter =
    ${env.build_src_filter}
    +<examples/prng>

build_flags =
    ${env.build_flags}



[env:SchedLock]
build_src_filter =
    ${env.build_src_filter}
    +<examples/sched-lock>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=5000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_API_NOINLINE=1


[env:SemaphoreMultithreadingDemo]
build_src_filter =
    ${env.build_src_filter}
    +<examples/semaphore-multithreading-demo>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_TIME_SLICE_US=16000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:Signal]
build_src_filter =
    ${env.build_src_filter}
    +<examples/signal>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=200000
        -DCONFIG_KERNEL_TIME_SLICE_US=200000


[env:StackSentinel]
build_src_filter =
    ${env.build_src_filter}
    +<examples/stack-sentinel>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_TIME=1
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_THREAD_STACK_SENTINEL=1
        -DCONFIG_THREAD_STACK_CANARY=1
        -DCONFIG_THREAD_CANARIES=1


[env:Sysclock]
build_src_filter =
    ${env.build_src_filter}
    +<examples/sysclock>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=250000
        -DCONFIG_KERNEL_TIME_SLICE_US=250000
        -DCONFIG_KERNEL_UPTIME=0
        -DCONFIG_KERNEL_DEBUG=1
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:SystemWorkqueue]
build_src_filter =
    ${env.build_src_filter}
    +<examples/system-workqueue>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
        -DCONFIG_KERNEL_API_NOINLINE=0


[env:ThreadTermination]
build_src_filter =
    ${env.build_src_filter}
    +<examples/thread-termination>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_TIME_SLICE_US=1000000
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=100000
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_UPTIME=0
        -DCONFIG_KERNEL_THREAD_TERMINATION_TYPE=1


[env:Time]
build_src_filter =
    ${env.build_src_filter}
    +<examples/time>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_TIME=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0


[env:Timers]
build_src_filter =
    ${env.build_src_filter}
    +<examples/timers>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_THREAD_STACK_SENTINEL=1
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_TIME_SLICE_US=10000
        -DCONFIG_KERNEL_TIMERS=1
        -DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=0x60


[env:Uptime]
build_src_filter =
    ${env.build_src_filter}
    +<examples/uptime>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=1
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_API_NOINLINE=1
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_TIME=1


[env:V2]
build_src_filter =
    ${env.build_src_filter}
    +<examples/v2>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_TIME=1
        -DCONFIG_KERNEL_UPTIME=1


[env:Workqueue]
build_src_filter =
    ${env.build_src_filter}
    +<examples/workqueue>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:ZephyrDevUsartTool]
build_src_filter =
    ${env.build_src_filter}
    +<examples/zephyr-dev-usart-tool>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=50
        -DCONFIG_SYSTEM_WORKQUEUE_ENABLE=1
        -DCONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=0x200
        -DCONFIG_DRIVERS_USART1_ASYNC=1

[env:ThreadPrioMultiq]
build_src_filter =
    ${env.build_src_filter}
    +<examples/thread-prio-multiq>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_THREAD_CANARIES=0
        -DCONFIG_THREAD_STACK_SENTINEL=0
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_TREAD_PRIO_MULTIQ=0


[env:Rt]
build_src_filter =
    ${env.build_src_filter}
    +<examples/rt>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_INTERRUPT_POLICY=0
        -DCONFIG_THREAD_DEFAULT_SREG=0


[env:ManyThreads]
build_src_filter =
    ${env.build_src_filter}
    +<examples/many-threads>

build_flags =
    ${env.build_flags}
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_THREAD_IDLE=0
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x60
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_COOPERATIVE=0
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_KERNEL_DEBUG=1
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_THREAD_STACK_SENTINEL=1
        -DCONFIG_ASSERT=1


[env:DrvGpio]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-gpio>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:DrvExti]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-exti>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:IsrUnpend]
build_src_filter =
    ${env.build_src_filter}
    +<examples/isr-unpend>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=400000
        -DCONFIG_KERNEL_TIME_SLICE_US=400000
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_SYSTICK_GPIOB_DEBUG=0x40


[env:Shell]
build_src_filter =
    ${env.build_src_filter}
    +<examples/shell>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=0x100
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0
        -DCONFIG_KERNEL_ASSERT=1
        -DCONFIG_KERNEL_THREAD_IDLE_ADD_STACK=0x60


[env:MainStack]
build_src_filter =
    ${env.build_src_filter}
    +<examples/main-stack>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=10000
        -DCONFIG_KERNEL_TIME_SLICE_US=10000
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_THREAD_IDLE=0
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=1024
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:Flags]
build_src_filter =
    ${env.build_src_filter}
    +<examples/flags>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=250000
        -DCONFIG_KERNEL_TIME_SLICE_US=250000
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=512
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:Ring]
build_src_filter =
    ${env.build_src_filter}
    +<examples/ring>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
        -DCONFIG_KERNEL_TIME_SLICE_US=10000
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=512
        -DCONFIG_THREAD_MAIN_COOPERATIVE=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=1
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:Logging]
build_src_filter =
    ${env.build_src_filter}
    +<examples/logging>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=0
        -DCONFIG_KERNEL_UPTIME=1
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_SYSCLOCK_PERIOD_US=1000
        -DCONFIG_KERNEL_TIME_SLICE_US=1000
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_LOGGING_SUBSYSTEM=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0


[env:DrvTimersPwm]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers-pwm>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=100000
        -DCONFIG_KERNEL_TIME_SLICE_US=100000
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=3
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=1024
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:DrvTimersPwmIcrn]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers-pwm-icrn>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=100000
        -DCONFIG_KERNEL_TIME_SLICE_US=100000
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=3
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=1024
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:DrvTimersCtcToggle]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-timers-ctc-toggle>

build_flags =
    ${env.build_flags}
        -DCONFIG_KERNEL_COOPERATIVE_THREADS=1
        -DCONFIG_DEFAULT_KERNEL_SYSCLOCK_PERIOD_US=100000
        -DCONFIG_KERNEL_TIME_SLICE_US=100000
        -DCONFIG_KERNEL_SYSLOCK_HW_TIMER=3
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_KERNEL_THREAD_IDLE=1
        -DCONFIG_THREAD_EXPLICIT_MAIN_STACK=1
        -DCONFIG_THREAD_MAIN_STACK_SIZE=1024
        -DCONFIG_STDIO_PRINTF_TO_USART=0
        -DCONFIG_INTERRUPT_POLICY=1
        -DCONFIG_KERNEL_ASSERT=0
        -DCONFIG_KERNEL_DEBUG=0
        -DCONFIG_KERNEL_SCHEDULER_DEBUG=0


[env:DrvUsart]
build_src_filter =
    ${env.build_src_filter}
    +<examples/drv-usart>

build_flags =
    ${env.build_flags}
        -DCONFIG_THREAD_CANARIES=1
        -DCONFIG_STDIO_PRINTF_TO_USART=0


[env:Heap]
build_src_filter =
    ${env.build_src_filter}
    +<examples/heap>

build_flags =
    ${env.build_flags}
        -DCONFIG_STDIO_PRINTF_TO_USART=0